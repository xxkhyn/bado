{% extends "base.html" %}

{% block title %}チーム分け結果{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto; padding: 20px;">
    <div style="margin-bottom: 20px; display: flex; align-items: center; justify-content: space-between;">
        <h1 style="margin: 0; font-size: 1.5rem;">チーム分け結果</h1>
        <a href="{% url 'calendar' %}" class="btn gray">カレンダーに戻る</a>
    </div>

    <div style="margin-bottom: 20px;">
        <h2 style="font-size: 1.2rem; color: var(--text-muted);">{{ event.title }}</h2>
        <p style="color: var(--text-dim);">{{ event.start|date:"Y年m月d日 H:i" }} 〜</p>
    </div>

    <div style="display: grid; gap: 20px; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
        {% for team in teams %}
        <div class="card"
            style="background: var(--bg-surface); border: 1px solid var(--border-subtle); border-radius: 8px; padding: 16px;">
            <h3
                style="margin-top: 0; border-bottom: 1px solid var(--border-subtle); padding-bottom: 8px; color: var(--brand-primary);">
                チーム {{ forloop.counter }}
                <span style="font-size: 0.8rem; color: var(--text-muted); font-weight: normal; margin-left: 8px;">({{
                    team|length }}名)</span>
            </h3>
            <ul style="list-style: none; padding: 0; margin: 0;">
                {% for user in team %}
                <li
                    style="padding: 8px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center;">
                    <div
                        style="width: 32px; height: 32px; background: var(--bg-main); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px; font-weight: bold; color: var(--text-muted);">
                        {{ user.username|first|upper }}
                    </div>
                    <span>{{ user.first_name|default:user.username }}</span>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% empty %}
        <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-muted);">
            参加者がいません。
        </div>
        {% endfor %}
    </div>

    <div style="margin-top: 30px; text-align: center;">
        <button onclick="location.reload()" class="btn">再シャッフル</button>
    </div>
</div>
{% endblock %}