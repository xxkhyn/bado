# 🎓 bado システム基礎用語ガイド

「なんとなく動いているけど、裏側で何が起きているのかよくわからない」という部分（認証、データベース、サーバー）について、**このアプリ (bado) を例にして** わかりやすく解説します。

---

## 🔐 1. 認証 (Authentication)
**「あなたは誰ですか？」を確認する仕組み**です。

### 🏷️ 仕組みのイメージ
**「イベント会場の入り口」** を想像してください。

1. **Googleログイン (OAuth)**
   - badoアプリ自体は、あなたのパスワードを知りませんし、保存もしません。
   - 代わりに「Googleさん、この人が誰か確認してください」とお願いします。
   - Googleが「この人は間違いなく○○さんです」という**証明書（トークン）**を返してくれます。
   - badoはそれを信じて「どうぞ」と通します。

2. **セッションとCookie (クッキー)**
   - 一度ログインに成功すると、**「入場リストバンド」**（セッションID）がブラウザに保存されます。
   - 次回からは、わざわざ証明書を見せなくても、そのリストバンド（Cookie）を見せるだけで「あ、さっきの人ね」と認識されます。

### badoでの実装
- **django-allauth**: この複雑なやり取りを全部自動でやってくれるライブラリ（便利な道具）を使っています。
- **Userモデル**: 認証が完了した後、「この人は『運営(Officer)』」「この人は『一般(Member)』」といった**役割(Role)**をbado側で管理しています。

---

## 🗄️ 2. データベース (Database)
**「アプリ専用の高性能なノート」** です。

### 🏷️ 仕組みのイメージ
**「Excelファイル」** を想像すると近いです。

- **テーブル**: Excelの「シート」にあたります。
  - `User` シート：ユーザーの名前や役割を記録。
  - `Event` シート：イベントの日時や内容を記録。
  - `EventAttendance` シート：誰がどのイベントに参加するかを記録。

- **レコード**: Excelの「行」にあたります。1つのイベント、1人のユーザーの情報です。
- **カラム**: Excelの「列」にあたります。名前、日付、IDなどの項目です。

### badoでの使われ方
- **SQLite (開発環境)**:
  - `db.sqlite3` という**1つのファイル**に全てのシートが入っています。
  - 手軽で設定不要ですが、たくさんの人が同時に書き込むのは苦手です。
- **PostgreSQL (本番環境推奨)**:
  - 巨大な図書館のような、専用のデータベースシステムです。
  - 何百人が同時にアクセスしても壊れません。本番環境（サーバー上）ではこちらを使います。

---

## 🖥️ 3. 服务器 (Server)
**「24時間365日、注文を待ち受ける店員さん」** です。

### 🏷️ 仕組みのイメージ
**「レストラン」** で例えるとわかりやすいです。

1. **クライアント (Browser/スマホ)** = **お客さん**
   - 「カレンダーを見せて（URLにアクセス）」と注文します。
   - 「このイベントに参加したい（ボタンをクリック）」と注文します。

2. **サーバー (Django)** = **厨房のシェフ**
   - 注文が入ると、レシピ（プログラムコード）を見ながら料理を作ります。
   - 「カレンダーを見たい」と言われたら、データベース（冷蔵庫）からデータを取り出して、HTML（料理）を盛り付けて提供します。

3. **リクエストとレスポンス**
   - **リクエスト**: お客さんの注文。「ページが見たい」「データを送りたい」。
   - **レスポンス**: シェフからの提供。「HTMLページ」「成功しましたというメッセージ」。

### badoのサーバー構成
- **Django**: シェフそのもの。注文を受けて、データベースから情報を引っ張り出し、HTMLを作って返します。
- **Gunicorn / WhiteNoise**: ホールスタッフ。お客さんからの注文を効率よくシェフに伝えたり、メニュー表（CSSや画像などの動かないファイル）をサッと渡したりします。

---

## 🔗 すべてをつなげると...

1. あなたがスマホで **「参加する」ボタン** を押す (**クライアント**)。
2. **「入場リストバンド (Cookie)」** と一緒に注文が **サーバー** に届く。
3. サーバーはリストバンドを見て **「誰からの注文か」 (認証)** を確認する。
4. サーバーは **データベース** の `EventAttendance` シートに「参加」と書き込む。
5. サーバーは「書き込みましたよ」という返事をスマホに返す。
6. スマホの画面が「参加中」に変わる。

これが、裏側で一瞬のうちに行われていることです！
