# 🗺️ アプリ完全構成図 (bado)

「どのファイルがどこにあって、何をしているか」を網羅した地図です。
面接の3日前にこれを見て、頭の中にフォルダ構成をイメージできるようにしましょう。

```mermaid
graph TD
    User((ユーザー)) --> Browser[ブラウザ/スマホ]
    Browser -- "1. URLアクセス" --> URLs[urls.py (案内所)]
    URLs -- "2. 振り分け" --> Views[views.py (仕事人)]
    Views -- "3. データ読み書き" --> Models[(models.py / DB)]
    Views -- "4. 画面作成" --> Templates[HTMLファイル (台本)]
    Templates -- "4. 表示" --> Browser
    Browser -- "5. 操作(クリック等)" --> JS[calendar.js (演出家)]
    JS -- "6. 裏で通信(API)" --> URLs
```

---

## 📂 ルートディレクトリ (一番上の階層)

| ファイル名 | 役割 (一言で) |
| :--- | :--- |
| `manage.py` | **司令塔**。サーバー起動 (`runserver`) や DB更新 (`migrate`) に使用。 |
| `procfile` | **Render用設定**。本番サーバーでの起動コマンドが書いてある。 |
| `docker-compose.yml` | **Docker設定**。開発環境を一発で作るための設計図。 |
| `requirements.txt` | **買い物リスト**。必要なライブラリ一覧。 |
| `.env` / `.env.prod` | **秘密のメモ**。パスワードなどの機密情報。 |

---

## 📂 circle_app (設定フォルダ)

| ファイル名 | 役割 |
| :--- | :--- |
| `settings.py` | **環境設定**。DB接続先、セキュリティ、言語設定など。 |
| `urls.py` | **総合受付**。サイト全体のURL構造を定義。 |
| `wsgi.py` / `asgi.py` | **接続口**。WebサーバーとDjangoを繋ぐパイプ。 |

---

## 📂 core (メイン機能フォルダ)

一番重要なフォルダです。迷ったらここを見ましょう。

### 🐍 Python (ロジック)
詳細は別冊 `PYTHON_FILES_GUIDE.md` を参照ですが、ざっくり言うと：
*   **`models.py`**: **データ定義** (User, Event, EventAttendance)。
*   **`views.py`**: **メイン処理** (カレンダー表示、チェックイン、API)。
*   **`urls.py`**: **core専用の受付**。
*   **`forms.py`**: **入力チェック** (役職変更など)。
*   **`admin.py`**: **管理画面**の設定。

### 📄 templates/core (画面の見た目)
Djangoがデータを入れてブラウザに返す「HTMLの雛形」です。

| ファイル名 | 役割 |
| :--- | :--- |
| `calendar.html` | **カレンダー**。メイン画面。JSと連携して動く。 |
| `mypage.html` | **マイページ**。参加履歴やスタッツを表示。 |
| `magazines_list.html` | **会報誌一覧**。PDFへのリンクを表示。 |
| `magazines_upload.html` | **会報誌アップロード**。運営用の投稿画面。 |

---

## 📂 templates (共通テンプレート)

| ファイル名 | 役割 |
| :--- | :--- |
| `base.html` | **骨組み**。ヘッダー、メニュー、フッターなど全ページ共通部分。他のHTMLはこれを継承する。 |

---

## 📂 static (静的ファイル)

動かない（サーバーで書き換えない）ファイル群です。

### 🎨 css
| ファイル名 | 役割 |
| :--- | :--- |
| `style.css` | **デザイン**。色、配置、スマホ対応(レスポンシブ)の定義。 |

### 📜 js
| ファイル名 | 役割 |
| :--- | :--- |
| `calendar.js` | **動き担当**。カレンダーのクリック処理、参加ボタンの非同期通信、モーダル表示。 |
| `sw.js` | **Service Worker**。キャッシュ管理、オフライン対応などPWAの裏方。 |

### 📱 その他
| ファイル名 | 役割 |
| :--- | :--- |
| `manifest.json` | **PWA設定**。アプリアイコンや起動時の画面色をスマホに教える。 |
| `images/` | ロゴ画像など。 |

---

## 🚀 3日間の学習プラン

### 1日目: 全体像と Python (バックエンド)
*   [ ] この `COMPLETE_FILE_MAP.md` の図を見て、リクエストの流れを指で追えるようにする。
*   [ ] `PYTHON_FILES_GUIDE.md` を読み、特に `models.py` と `views.py` の**コードの意味**を理解する。
*   [ ] 「参加ボタン」を押したとき、データがどう変わるか口で説明できるようにする。

### 2日目: 画面と JavaScript (フロントエンド)
*   [ ] `calendar.html` と `calendar.js` を見比べる。
    *   HTMLの `id="xxx"` が JSの `document.getElementById("xxx")` で使われているのを確認。
*   [ ] `fetch` (API通信) の部分を見て、「画面遷移せずにデータだけ送る」仕組みを理解する。

### 3日目: パフォーマンスとインフラ (加点ポイント)
*   [ ] `INTERVIEW_GUIDE.md` の「パフォーマンスチューニング」を読む。
*   [ ] 「なぜインデックスを貼ったのか？ (検索高速化)」「なぜconn_max_ageを設定したのか？ (SSLコスト削減)」を自分の言葉で話せるように練習する。
